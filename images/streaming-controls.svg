<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#475569"/>
    </marker>
    <marker id="arrow-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ef4444"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="400" fill="#f8fafc"/>
  
  <!-- Title -->
  <text x="400" y="30" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#1e293b" text-anchor="middle">Streaming Controls: Parallel Monitor + Interrupt</text>
  <text x="400" y="50" font-family="Arial, sans-serif" font-size="11" fill="#64748b" text-anchor="middle">Conceptual — Probabilistic intervention during generation</text>
  
  <!-- Status badge -->
  <rect x="330" y="60" width="140" height="20" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="1"/>
  <text x="400" y="74" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#b45309" text-anchor="middle">STATUS: CONCEPTUAL</text>
  
  <!-- Model -->
  <rect x="50" y="130" width="120" height="60" rx="8" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
  <text x="110" y="160" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1e40af" text-anchor="middle">AI Model</text>
  <text x="110" y="178" font-family="Arial, sans-serif" font-size="9" fill="#1e40af" text-anchor="middle">Generating...</text>
  
  <!-- Token stream -->
  <line x1="170" y1="160" x2="250" y2="160" stroke="#475569" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="210" y="150" font-family="Arial, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">tokens</text>
  
  <!-- Splitter -->
  <circle cx="270" cy="160" r="15" fill="#f1f5f9" stroke="#94a3b8" stroke-width="2"/>
  
  <!-- Path to user (top) -->
  <line x1="285" y1="155" x2="380" y2="120" stroke="#475569" stroke-width="2"/>
  <line x1="380" y1="120" x2="500" y2="120" stroke="#475569" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="440" y="110" font-family="Arial, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">streams immediately</text>
  
  <!-- User -->
  <rect x="510" y="95" width="100" height="50" rx="8" fill="#e0e7ff" stroke="#6366f1" stroke-width="2"/>
  <text x="560" y="125" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#4338ca" text-anchor="middle">User</text>
  
  <!-- Path to monitor (bottom) -->
  <line x1="285" y1="165" x2="380" y2="200" stroke="#475569" stroke-width="2"/>
  <line x1="380" y1="200" x2="380" y2="220" stroke="#475569" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="440" y="195" font-family="Arial, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">parallel copy</text>
  
  <!-- Monitor -->
  <rect x="300" y="230" width="160" height="80" rx="8" fill="#fef9c3" stroke="#eab308" stroke-width="2"/>
  <text x="380" y="255" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#a16207" text-anchor="middle">Stream Monitor</text>
  <text x="380" y="275" font-family="Arial, sans-serif" font-size="9" fill="#a16207" text-anchor="middle">Running analysis</text>
  <text x="380" y="290" font-family="Arial, sans-serif" font-size="9" fill="#a16207" text-anchor="middle">Confidence calculation</text>
  
  <!-- Decision diamond -->
  <polygon points="540,270 580,240 620,270 580,300" fill="#fee2e2" stroke="#ef4444" stroke-width="2"/>
  <text x="580" y="275" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#b91c1c" text-anchor="middle">conf &lt;</text>
  <text x="580" y="287" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#b91c1c" text-anchor="middle">threshold?</text>
  
  <!-- Arrow to decision -->
  <line x1="460" y1="270" x2="535" y2="270" stroke="#475569" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- No path (continue) -->
  <line x1="620" y1="260" x2="680" y2="260" stroke="#22c55e" stroke-width="2"/>
  <text x="650" y="250" font-family="Arial, sans-serif" font-size="9" fill="#22c55e">No</text>
  <text x="720" y="265" font-family="Arial, sans-serif" font-size="10" fill="#166534">Continue</text>
  
  <!-- Yes path (interrupt) -->
  <line x1="580" y1="300" x2="580" y2="330" stroke="#ef4444" stroke-width="2" marker-end="url(#arrow-red)"/>
  <text x="595" y="320" font-family="Arial, sans-serif" font-size="9" fill="#ef4444">Yes</text>
  
  <!-- Interrupt action -->
  <rect x="500" y="340" width="160" height="45" rx="6" fill="#fee2e2" stroke="#ef4444" stroke-width="2"/>
  <text x="580" y="360" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#b91c1c" text-anchor="middle">INTERRUPT</text>
  <text x="580" y="375" font-family="Arial, sans-serif" font-size="9" fill="#991b1b" text-anchor="middle">"Let me rephrase..."</text>
  
  <!-- Interrupt to user -->
  <path d="M 660 362 Q 700 362 700 145 L 615 145" stroke="#ef4444" stroke-width="2" fill="none" stroke-dasharray="5,3" marker-end="url(#arrow-red)"/>
  
  <!-- Note -->
  <rect x="50" y="330" width="280" height="55" rx="6" fill="#fefce8" stroke="#eab308" stroke-width="1"/>
  <text x="190" y="350" font-family="Arial, sans-serif" font-size="9" fill="#a16207" text-anchor="middle">⚠ Unknowns:</text>
  <text x="190" y="365" font-family="Arial, sans-serif" font-size="9" fill="#a16207" text-anchor="middle">• Optimal confidence thresholds</text>
  <text x="190" y="378" font-family="Arial, sans-serif" font-size="9" fill="#a16207" text-anchor="middle">• User tolerance for interruptions • Monitor latency</text>
</svg>
